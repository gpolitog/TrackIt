webpackJsonp([5],{100:function(t,e,s){t.exports={default:s(103),__esModule:!0}},101:function(t,e,s){t.exports={default:s(227),__esModule:!0}},103:function(t,e,s){s(104),t.exports=s(3).Object.assign},104:function(t,e,s){var l=s(16);l(l.S+l.F,"Object",{assign:s(105)})},105:function(t,e,s){"use strict";var l=s(30),i=s(106),o=s(107),a=s(18),n=s(32),r=Object.assign;t.exports=!r||s(17)(function(){var t={},e={},s=Symbol(),l="abcdefghijklmnopqrst";return t[s]=7,l.split("").forEach(function(t){e[t]=t}),7!=r({},t)[s]||Object.keys(r({},e)).join("")!=l})?function(t,e){for(var s=a(t),r=arguments.length,c=1,u=i.f,d=o.f;r>c;)for(var p,_=n(arguments[c++]),f=u?l(_).concat(u(_)):l(_),m=f.length,v=0;m>v;)d.call(_,p=f[v++])&&(s[p]=_[p]);return s}:r},106:function(t,e){e.f=Object.getOwnPropertySymbols},107:function(t,e){e.f={}.propertyIsEnumerable},227:function(t,e,s){s(228),t.exports=s(3).Object.keys},228:function(t,e,s){var l=s(18),i=s(30);s(229)("keys",function(){return function(t){return i(l(t))}})},229:function(t,e,s){var l=s(16),i=s(3),o=s(17);t.exports=function(t,e){var s=(i.Object||{})[t]||Object[t],a={};a[t]=e(s),l(l.S+l.F*o(function(){s(1)}),"Object",a)}},240:function(t,e,s){var l=s(241);"string"==typeof l&&(l=[[t.i,l,""]]),l.locals&&(t.exports=l.locals);s(89)("f70f81b6",l,!0)},241:function(t,e,s){e=t.exports=s(88)(!1),e.push([t.i,".modal__wrapper{padding:20px}.modal__wrapper .modal__header{margin-bottom:20px}.modal__wrapper .modal__header .header__label{font-size:1.5rem}",""])},242:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=s(100),i=s.n(l),o=s(101),a=s.n(o),n=s(0),r=s(9);e.default={props:["currentPos","deviceID","lastMessage"],data:function(){return{type_current_field:"string",types_current_field:[{label:"String",value:"string"},{label:"Number",value:"number"},{label:"Boolean",value:"bool"}],current_custom_field:{key:null,value:null},altitude:0,speed:0,satellites:0,direction:0,custom:{}}},methods:{open:function(){this.$refs.postMessageModal.open()},modalOpenHandler:function(){this.direction=this.lastMessage&&this.lastMessage["position.direction"]?this.lastMessage["position.direction"]:0;var t=a()(this.lastMessage).length?[this.lastMessage["position.latitude"],this.lastMessage["position.longitude"]]:[51.50853,-.12574];this.$emit("update:marker",{id:this.deviceID,lastPos:t})},modalSubmit:function(){var t=i()({"position.latitude":this.currentPos.lat,"position.longitude":this.currentPos.lng,"position.altitude":this.altitude,"position.direction":this.direction,"position.satellites":this.satellites,"position.speed":this.speed},this.custom);this.$store.dispatch("postMessage",{data:t,id:this.deviceID}),this.$emit("update:dragged",!1),this.altitude=0,this.satellites=0,this.speed=0,this.custom={},this.type_current_field="string",this.current_custom_field={key:null,value:null},this.$refs.postMessageModal.close()},modalButtonCloseHandler:function(){this.$emit("update:dragged",!1),this.$refs.postMessageModal.close()},addCustomFieldHandler:function(){this.current_custom_field.key&&(n.a.set(this.custom,this.current_custom_field.key,this.current_custom_field.value),this.current_custom_field.key=null,this.current_custom_field.value=null,this.type_current_field="string")},removeCustomFieldHandler:function(t){n.a.delete(this.custom,t)},inputChange:function(t){switch(t){case"number":this.current_custom_field.value=0;break;case"string":this.current_custom_field.value="";break;case"bool":this.current_custom_field.value=!1}}},components:{QModal:r.s,QIcon:r.i,QBtn:r.g,QSelect:r.x,QInput:r.j,QKnob:r.o,QCheckbox:r.h,QModalLayout:r.t,QToolbar:r.C}}},243:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-modal",{ref:"postMessageModal",attrs:{"content-css":{minWidth:"50vw",minHeight:"50vh"}},on:{open:t.modalOpenHandler}},[s("q-modal-layout",[s("q-toolbar",{attrs:{slot:"footer",color:"dark"},slot:"footer"},[s("q-btn",{staticClass:"full-width",attrs:{flat:""},on:{click:t.modalSubmit}},[t._v("Send")])],1),t._v(" "),s("q-toolbar",{attrs:{slot:"header",color:"dark"},slot:"header"},[s("span",{staticClass:"header__label"},[t._v("Send message")]),t._v(" "),s("q-icon",{staticClass:"absolute-top-right cursor-pointer",attrs:{name:"close",size:"2.5rem",flat:""},on:{click:t.modalButtonCloseHandler}})],1),t._v(" "),s("div",{staticClass:"modal__wrapper"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6 col-sm-12"},[s("q-input",{attrs:{"float-label":"Latitude",placeholder:"Latitude"},model:{value:t.currentPos.lat,callback:function(e){t.$set(t.currentPos,"lat",e)},expression:"currentPos.lat"}}),t._v(" "),s("q-input",{attrs:{"float-label":"Longitude",placeholder:"Longitude"},model:{value:t.currentPos.lng,callback:function(e){t.$set(t.currentPos,"lng",e)},expression:"currentPos.lng"}})],1),t._v(" "),s("div",{staticClass:"text-center col-md-5 offset-md-1 col-sm-12"},[s("q-knob",{attrs:{min:0,max:360},model:{value:t.direction,callback:function(e){t.direction=e},expression:"direction"}},[s("div",{staticClass:"direction",style:{transform:"rotate("+(t.direction-45)+"deg)"}})])],1),t._v(" "),s("div",{staticClass:"col-4"},[s("q-input",{attrs:{type:"number",min:-100,max:1e4,"float-label":"Altitude",placeholder:"Altitude"},model:{value:t.altitude,callback:function(e){t.altitude=e},expression:"altitude"}})],1),t._v(" "),s("div",{staticClass:"col-4"},[s("q-input",{attrs:{type:"number",min:0,"float-label":"Satellites",placeholder:"Satellites"},model:{value:t.satellites,callback:function(e){t.satellites=e},expression:"satellites"}})],1),t._v(" "),s("div",{staticClass:"col-4"},[s("q-input",{attrs:{type:"number",min:0,"float-label":"Speed",placeholder:"Speed"},model:{value:t.speed,callback:function(e){t.speed=e},expression:"speed"}})],1),t._v(" "),s("div",{staticClass:"col-12"},[t._v("Custom properties")]),t._v(" "),s("div",{staticClass:"col-4"},[t._v("\n        Key\n      ")]),t._v(" "),s("div",{staticClass:"col-8"},[t._v("\n        Value\n      ")]),t._v(" "),s("div",{staticClass:"col-4"},[s("q-input",{attrs:{type:"text",placeholder:"Key"},model:{value:t.current_custom_field.key,callback:function(e){t.$set(t.current_custom_field,"key",e)},expression:"current_custom_field.key"}})],1),t._v(" "),s("div",{staticClass:"col-4 text-center vertical-middle",staticStyle:{"line-height":"3.5rem"}},["number"==t.type_current_field?s("q-input",{attrs:{type:"number",placeholder:"Value"},model:{value:t.current_custom_field.value,callback:function(e){t.$set(t.current_custom_field,"value",e)},expression:"current_custom_field.value"}}):t._e(),t._v(" "),"string"==t.type_current_field?s("q-input",{attrs:{type:"text",placeholder:"Value"},model:{value:t.current_custom_field.value,callback:function(e){t.$set(t.current_custom_field,"value",e)},expression:"current_custom_field.value"}}):t._e(),t._v(" "),"bool"==t.type_current_field?s("q-checkbox",{model:{value:t.current_custom_field.value,callback:function(e){t.$set(t.current_custom_field,"value",e)},expression:"current_custom_field.value"}}):t._e()],1),t._v(" "),s("div",{staticClass:"col-2"},[s("q-select",{attrs:{options:t.types_current_field},on:{change:t.inputChange},model:{value:t.type_current_field,callback:function(e){t.type_current_field=e},expression:"type_current_field"}})],1),t._v(" "),s("div",{staticClass:"col-2 relative-position"},[s("q-icon",{staticClass:"pull-right cursor-pointer absolute-bottom-right",staticStyle:{bottom:"10px"},attrs:{name:"add",size:"2rem",flat:""},on:{click:t.addCustomFieldHandler}})],1)]),t._v(" "),t._l(t.custom,function(e,l){return s("div",{key:l,staticClass:"row",staticStyle:{"margin-top":"10px"}},[s("div",{staticClass:"col-5 ellipsis"},[t._v("\n        "+t._s(l)+"\n      ")]),t._v(" "),s("div",{staticClass:"col-5 ellipsis"},[t._v("\n        "+t._s(e)+"\n      ")]),t._v(" "),s("div",{staticClass:"col-2"},[s("q-icon",{staticClass:"pull-right cursor-pointer",attrs:{name:"remove",size:"1.5rem",flat:""},on:{click:function(e){t.removeCustomFieldHandler(l)}}})],1)])})],2)],1)],1)},staticRenderFns:[]}},93:function(t,e,s){function l(t){s(240)}var i=s(29)(s(242),s(243),l,null,null);t.exports=i.exports}});